var write_us_link=document.querySelector(".write-us-link"),popup=document.querySelector(".modal-write-us"),modal_close=popup.querySelector(".modal-close"),name_modal=popup.querySelector("[name=username]"),form=popup.querySelector(".write-us-form"),e_mail=popup.querySelector("[name=e-mail]"),letter_content=popup.querySelector("[name=letter-content]"),isStorageSupport=!0,storage_name="",storage_mail="";try{storage_name=localStorage.getItem("username"),storage_mail=localStorage.getItem("usermail")}catch(e){isStorageSupport=!1}write_us_link.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("modal-write-us-show"),storage_name&&storage_mail?(name_modal.value=storage_name,e_mail.value=storage_mail,letter_content.focus()):name_modal.focus()}),modal_close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-write-us-show"),popup.classList.remove("modal-error")}),form.addEventListener("submit",function(e){name_modal.value&&e_mail.value&&letter_content.value?isStorageSupport&&(localStorage.setItem("username",name_modal.value),localStorage.setItem("usermail",e_mail.value)):(e.preventDefault(),popup.classList.remove("modal-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&popup.classList.contains("modal-write-us-show")&&(e.preventDefault(),popup.classList.remove("modal-write-us-show"),popup.classList.remove("modal-error"))});
